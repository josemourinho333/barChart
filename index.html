<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pyoo Bar Chart</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <style>
    * {
      font-family: 'roboto', sans-serif;
    }

    header {
      text-align: center;
    }

    h1 {
      font-size: 30px;
    }

    #container {
      width: 80%;
      margin: auto;
      display: flex;
      flex-direction: column;
    }

    .grid-header-container {
      width: 100%;
      display: grid;
      grid-template-columns: 300px repeat(7, 1fr);
    }

    .name-header {
      background-color: #232528;
      color: #fff;
      text-align: center;
    }

    .value-header {
      background-color: #eaf6ff;
      text-align: right;
      width: 100%;
    }

    .grid-container {
      width: 100%;
      display: grid;
      grid-template-columns: 300px 1fr;
      margin-bottom: 10px;
    }

    .name, .value {
      color: #fff;
      font-weight: 600;
      font-size: 20px;
      padding: 10px 0px 10px 0px;
      background-color: #0cce6b;
    }

    .name {
      border-right: 3px solid #eaf6ff;
      text-align: center;
    }

    .value {
      text-align: right;
    }

    .new-name, .new-value, .color {
      border: 1px solid #232528;
      width: 150px;
    }

    .button-container {
      width: 80%;
      margin: auto;
    }

    .button-group {
      margin: 10px;
    }

    button {
      background-color: #eaf6ff;
      border: 1px solid #232528;
      color: #232528;
      padding: 5px 10px 5px 10px;
      border-radius: 10px;
      width: 20%;
    }

    button:hover {
      background-color: #232528;
      color: white;
    }

    .edit-data {
      display: none;
    }

    .edit-container {
      display: flex;
      flex-direction: column;
    }

    .edit-container > button {
      margin: 10px 0px 10px 0px;
    }

    .create-container {
      display: flex;
      flex-direction: column;
    }

    .create-container > button {
      margin: 10px 0px 10px 0px;
    }

    .create-data {
      display: none;
      margin: 5px;
    }


  </style>
</head>
<body>
  <header>
    <h1>
      Premier League's Current Top Scorers vs Most Goals Scored In a Season
    </h1>
    <h4>
      2022 - 2023
    </h3>
  </header>

  <div class="button-container">
    <div class="create-container button-group">
      <button class="new">Create</button>
      <div class="textArea-labels create-data">Bar label names separated by commas, here's sample data.</div>
      <textarea name="" id="bar-labels" cols="30" rows="1" placeholder="Names - Separate by comma" class="create-data">Mohamed Salah - 2017/18,Mohamed Salah,Son Heung-Min,Cristiano Ronaldo</textarea>
      <div class="textArea-labels create-data">Bar value numbers separated by commas, here's sample data.</div>
      <textarea name="" id="bar-values" cols="30" rows="1" placeholder="Numbers -Separate by comma" class="create-data">32,22,19,18</textarea>
      <div class="textArea-labels create-data">Enter a categorization name for the bar labels. Sample given.</div>
      <textarea name="" id="bar-header-name" cols="30" rows="1" placeholder="" class="create-data">Player Name</textarea>
      <div class="textArea-labels create-data">Two numbers, separate by a comma, sets max value for legend and amount to increment by. Sample given.</div>
      <textarea name="" id="bar-legends" cols="30" rows="1" placeholder="Numbers -Separate by comma" class="create-data">35,5</textarea>
      <button class="subit-new create-data">Submit</button>
    </div>
  </div>

  <div id="container">


  </div>

  <div class="button-container">

    <div class="add-container button-group">
      <input type="text" class="new-name" placeholder="Name">
      <input type="number" class="new-value" placeholder="Goals">
      <input type="text" class="color" placeholder="Hexcode Color">
      <button id="add">Add</button>
    </div>

    <div class="edit-container button-group">
      <button id="edit">Edit Data</button>
      <textarea name="edit-area" id="edit-space" cols="30" rows="10" class="edit-data" placeholder="Change any values to what you want, or delete the row to delete data"></textarea>
      <button id="submit" class="edit-data">Submit</button>
    </div>



  </div>



  <script>

    $('.new').click(function() {
      if ($(this).text() === 'Create') {
        $(this).text('Cancel');
        $('.create-data').show();
      } else {
        $(this).text('Create');
        $('.create-data').hide();
      }
    });

    $('.subit-new').click(function drawBarChart(data, options, element) {

      let barNames = $('#bar-labels').text();
      let barNamesArray = barNames.split(',');
      let barValues = $('#bar-values').text();
      let barValuesArray = barValues.split(',');
      data = barNamesArray.concat(barValuesArray);

      let barHeader = $('#bar-header-name').text();
      let barHeaderArray = [barHeader];
      let barLegends = $('#bar-legends').text();
      let barLegendsArray = barLegends.split(',');
      options = barHeaderArray.concat(barLegendsArray);

      element = $('#container');

      const barsOut = (data, options, element) => {
          let maxTick = options[1];
          for (let i = 0; i < data.length/2; i++) {
            let colorR = Math.floor((Math.random() * 256));
            let colorG = Math.floor((Math.random() * 256));
            let colorB = Math.floor((Math.random() * 256));
            let rgb = `${colorR}, ${colorG}, ${colorB}`;
            let realWidth = Math.floor((data[i+(data.length/2)]/maxTick)*100);

            let $gridContainer = $('<div/>', {class: 'grid-container'}),
                $gridName = $('<div/>', {class: 'name', text: data[i], style: 'background-color: rgb(' + rgb + ');'}),
                $gridValue = $('<div/>', {
                  class: 'value',
                  text: data[i+(data.length/2)],
                  style: 'width: ' + realWidth + '%;' + 'background-color: rgb(' + rgb + ');'});

            $gridContainer.append($gridName).appendTo(element);
            $gridContainer.append($gridValue).appendTo(element);

          }
        };

        const setTicks = (options, element) => {
          let nameHeader = options[0];
          let maxTick = parseInt(options[1]);
          let tickBy = parseInt(options[2]);
          let ticks = maxTick/tickBy;

          let $gridHeaderContainer = $('<div/>', {class: 'grid-header-container'}),
              $nameHeader = $('<div/>', {class: 'name-header', text: nameHeader});

          $gridHeaderContainer.append($nameHeader).appendTo(element);

          for (let j = 0; j < ticks; j++) {
            let $valueHeader = $('<div/>', {class: 'value-header', text: (tickBy+=5)-5});
            $gridHeaderContainer.append($valueHeader).appendTo(element);
          }
        };

        setTicks(options, element);
        barsOut(data, options, element);

        $('.new').text('Create');
        $('.create-data').hide();

    });

    //create a function that will grab the inputs of name and goals, creates grid-container div, with name div and value div that will use the name and goals then run the function below to be able to set the width of the bar accordingly.
    $('#add').click(function(name, value, color) {
      $('.edit-data').hide();
      $('#edit').text('Edit Data');
      name = $('.new-name').val();
      value = parseInt($('.new-value').val());
      color = $('.color').val();
      let realWidth = Math.floor((parseInt($('.new-value').val())/35) * 100);
      let $gridContainer = $('<div/>', {class: 'grid-container'}),
          $gridName = $('<div/>', {class: 'name', text: name, style: 'background-color:' + color}),
          $gridValue = $('<div/>', {
            class: 'value',
            text: value,
            style: 'width:' + realWidth + '%' + ';' + 'background-color:' + color});

      $gridContainer.append($gridName).appendTo('#container');
      $gridContainer.append($gridValue).appendTo('#container');
    });

    $('#edit').click(function() {
      let editData = $('.edit-data');
      let editButton = $('#edit');

      if (editButton.text() === 'Edit Data') {
        editData.show();
        editButton.text('Close');
        const nameArray = [];
        const valueArray = [];
        const names = $('.name');
        const values = $('.value');
        for (let i = 0; i < names.length; i++) {
          nameArray.push(names[i].innerText);
        };

        for (let j = 0; j < values.length; j++) {
          valueArray.push(values[j].innerText);
        };

        $('#edit-space').text(nameArray + ',' + valueArray);

      } else {
        editData.hide();
        editButton.text('Edit Data');
      };

    });

    $('#submit').click(function() {
      $('.grid-container').remove();

      let changes = $('#edit-space').val();
      let changesArray = changes.split(',');
      let maxTick = $('.value-header').last();
      console.log(changesArray);
      for (let i = 0; i < changesArray.length/2 ; i++) {
        let colorR = Math.floor((Math.random() * 256));
        let colorG = Math.floor((Math.random() * 256));
        let colorB = Math.floor((Math.random() * 256));
        let rgb = `${colorR}, ${colorG}, ${colorB}`;
        let realWidth = Math.floor((changesArray[i+(changesArray.length/2)]/maxTick.text())*100);

        let $gridContainer = $('<div/>', {class: 'grid-container'}),
            $gridName = $('<div/>', {class: 'name', text: changesArray[i], style: 'background-color: rgb(' + rgb + ');'}),
            $gridValue = $('<div/>', {
              class: 'value',
              text: changesArray[i+(changesArray.length/2)],
              style: 'width: ' + realWidth + '%;' + 'background-color: rgb(' + rgb + ');'});

        $gridContainer.append($gridName).appendTo($('#container'));
        $gridContainer.append($gridValue).appendTo($('#container'));
      }

      $('#edit-space').empty();
      $('.edit-data').hide();
      $('#edit').text('Edit Data');
    });


    // console.log(drawBarChart(['Mohamed Salah - 2017/18', '32', 'Mohamed Salah', '22', 'Son Heung-Min', '19', 'Cristiano Ronaldo', '18'], ['Player Name' ,35, 5], $('#container')));

  </script>
</body>
</html>
